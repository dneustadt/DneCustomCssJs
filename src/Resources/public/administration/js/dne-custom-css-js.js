(this.webpackJsonp=this.webpackJsonp||[]).push([["dne-custom-css-js"],{"/3Mh":function(e){e.exports=JSON.parse('{"dne-customcssjs":{"modules":{"menu":"Custom CSS/JS","title":"CSS/JS Container","addModulesButton":"Add Container","salesChannelsLabel":"Sales channels","salesChannelsAll":"all","nameLabel":"Name","cssLabel":"CSS/SCSS","jsLabel":"JavaScript","activeLabel":"Active","saveButton":"Save","saveCompileButton":"Save & Compile","cancelButton":"Cancel","donateText":"Click here to support this free extension or if you want to buy me a cup of coffee","credit":"David Neustadt - kontakt@davidneustadt.de - https://neustadt.dev"}},"sw-privileges":{"permissions":{"dne_custom_js_css":{"label":"Custom CSS/JS"}}}}')},"0KDU":function(e,s,t){var n=t("uO3B");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,t("SZ7m").default)("7553c6ac",n,!0,{})},"380L":function(e){e.exports=JSON.parse('{"dne-customcssjs":{"modules":{"menu":"Custom CSS/JS","title":"CSS/JS Container","addModulesButton":"Container hinzufügen","salesChannelsLabel":"Verkaufskanäle","salesChannelsAll":"alle","nameLabel":"Name","cssLabel":"CSS/SCSS","jsLabel":"JavaScript","activeLabel":"Aktiv","saveButton":"Speichern","saveCompileButton":"Speichern & Kompilieren","cancelButton":"Abbrechen","donateText":"Klicken Sie hier, wenn Sie dieses kostenlose Plugin unterstützen oder mir einen Kaffee ausgeben möchten","credit":"David Neustadt - kontakt@davidneustadt.de - https://neustadt.dev"}},"sw-privileges":{"permissions":{"dne_custom_js_css":{"label":"Custom CSS/JS"}}}}')},"J2v/":function(e,s,t){"use strict";(function(e){var s=t("Zc3j"),n=t.n(s);t("0KDU"),t("JTdA");const{Component:o,Mixin:i,Filter:a}=Shopware,{mapPropertyErrors:l}=Shopware.Component.getComponentHelper();o.register("dne-module-detail",{template:n(),inject:["repositoryFactory","context","acl"],mixins:[i.getByName("notification")],metaInfo(){return{title:this.$createTitle()}},data:()=>({syncService:null,httpClient:null,module:null,isLoading:!1,processSuccess:!1,repository:null}),props:{moduleId:{type:String,required:!1,default:null}},computed:{editorConfigJs:()=>({mode:"ace/mode/javascript",useWorker:!1}),editorConfigSass:()=>({mode:"ace/mode/scss"}),...l("module",["name"])},created(){this.repository=this.repositoryFactory.create("dne_custom_js_css"),this.getModule(),this.syncService=Shopware.Service("syncService"),this.httpClient=this.syncService.httpClient},methods:{getModule(){this.moduleId?this.repository.get(this.moduleId,Shopware.Context.api).then((e=>{this.module=e})):this.module=this.repository.create(Shopware.Context.api)},onClickSave(){return this.isLoading=!0,this.repository.save(this.module,Shopware.Context.api).then((()=>{this.moduleId||(this.moduleId=this.module.id),this.getModule(),this.isLoading=!1,this.processSuccess=!0})).catch((s=>{this.isLoading=!1,e.name&&e.name.length&&this.createNotificationError({title:"Error",message:s})}))},onClickSaveCompile(){this.onClickSave().then((()=>{this.isLoading=!0;const e={Authorization:`Bearer ${Shopware.Context.api.authToken.access}`,"Content-Type":"application/json"};this.httpClient.get("_action/dne-customcssjs/compile",{headers:e}).then((()=>{this.isLoading=!1})).catch((e=>{this.isLoading=!1;try{this.createNotificationError({title:e.response.data.errors[0].title,message:a.getByName("truncate")(e.response.data.errors[0].detail,300),autoClose:!1})}catch(s){this.createNotificationError({title:e.title,message:e.message,autoClose:!1})}}))}))},saveFinish(){this.processSuccess=!1},pickColor(e){if(!this.$refs.cssEditor)return;const s=this.$refs.cssEditor.editor;s&&(s.session.insert(s.getCursorPosition(),e),s.renderer.scrollCursorIntoView(s.getCursorPosition(),.5))}}})}).call(this,t("3UD+")(e))},Zc3j:function(e,s){e.exports='{% block dne_module_detail %}\n    <sw-page class="dne-module-detail">\n        <template slot="smart-bar-actions">\n            <sw-button :routerLink="{ name: \'dne.module.list\' }">\n                {{ $t(\'dne-customcssjs.modules.cancelButton\') }}\n            </sw-button>\n\n            <sw-button-process\n                    v-if="module"\n                    :isLoading="isLoading"\n                    :processSuccess="processSuccess"\n                    :disabled="module.isNew() ? !acl.can(\'dne_custom_js_css.creator\') : !acl.can(\'dne_custom_js_css.editor\')"\n                    variant="primary"\n                    @process-finish="saveFinish"\n                    @click="onClickSave">\n                {{ $t(\'dne-customcssjs.modules.saveButton\') }}\n            </sw-button-process>\n\n            <sw-button-process\n                    v-if="module"\n                    :isLoading="isLoading"\n                    :processSuccess="processSuccess"\n                    :disabled="module.isNew() ? !acl.can(\'dne_custom_js_css.creator\') : !acl.can(\'dne_custom_js_css.editor\')"\n                    variant="primary"\n                    @process-finish="saveFinish"\n                    @click="onClickSaveCompile">\n                {{ $t(\'dne-customcssjs.modules.saveCompileButton\') }}\n            </sw-button-process>\n        </template>\n\n        <template slot="content">\n            <sw-card-view>\n                <sw-card v-if="module" :isLoading="isLoading">\n                    <sw-checkbox-field :label="$t(\'dne-customcssjs.modules.activeLabel\')" v-model="module.active"></sw-checkbox-field>\n\n                    <sw-container columns="1fr 1fr" gap="16px">\n                        <sw-field type="text"\n                                  :label="$t(\'dne-customcssjs.modules.nameLabel\')"\n                                  v-model="module.name"\n                                  validation="required"\n                                  :error="moduleNameError"\n                                  required>\n                        </sw-field>\n\n                        <sw-entity-many-to-many-select\n                            :localMode="module.isNew()"\n                            :label="$t(\'dne-customcssjs.modules.salesChannelsLabel\')"\n                            :placeholder="$t(\'dne-customcssjs.modules.salesChannelsAll\')"\n                            v-model="module.salesChannels">\n                        </sw-entity-many-to-many-select>\n                    </sw-container>\n\n                    <sw-field type="compactColorpicker"\n                              compact\n                              :alpha="false"\n                              @input="pickColor">\n                    </sw-field>\n\n                    <sw-code-editor\n                        :label="$t(\'dne-customcssjs.modules.cssLabel\')"\n                        ref="cssEditor"\n                        name="css"\n                        identifier="value"\n                        completionMode="entity"\n                        :editorConfig="editorConfigSass"\n                        v-model="module.css">\n                    </sw-code-editor>\n\n                    <sw-code-editor\n                        :label="$t(\'dne-customcssjs.modules.jsLabel\')"\n                        name="js"\n                        identifier="value"\n                        completionMode="entity"\n                        :editorConfig="editorConfigJs"\n                        v-model="module.js">\n                    </sw-code-editor>\n                </sw-card>\n                <sw-card>\n                    <a href="https://github.com/dneustadt/DneCustomCssJs" target="_blank" rel="noopener">\n                        {{ $t(\'dne-customcssjs.modules.donateText\') }}\n                    </a>\n                    <p>{{ $t(\'dne-customcssjs.modules.credit\') }}</p>\n                </sw-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}\n'},j7kl:function(e,s){e.exports='{% block dne_module_list %}\n    <sw-page class="dne-module-list">\n        {% block dne_module_list_smart_bar_actions %}\n            <template slot="smart-bar-actions">\n                <sw-button\n                    variant="primary"\n                    :routerLink="{ name: \'dne.module.create\' }"\n                    :disabled="!acl.can(\'dne_custom_js_css.creator\')"\n                >\n                    {{ $t(\'dne-customcssjs.modules.addModulesButton\') }}\n                </sw-button>\n            </template>\n        {% endblock %}\n\n        <template slot="content">\n            {% block dne_module_list_content %}\n                <sw-entity-listing\n                        v-if="modules"\n                        ref="listing"\n                        :items="modules"\n                        :repository="repository"\n                        :showSelection="false"\n                        :columns="columns"\n                        detailRoute="dne.module.detail">\n                    <template #column-active="{ item }">\n                        <sw-data-grid-column-boolean\n                            :value="item.active"\n                            :isInlineEdit="false">\n                        </sw-data-grid-column-boolean>\n                    </template>\n                    <template #column-salesChannels="{ item }">\n                        <sw-event-action-list-expand-labels\n                            v-if="item.salesChannels.length"\n                            :items="item.salesChannels">\n                        </sw-event-action-list-expand-labels>\n                        <span v-else>\n                            {{ $t(\'dne-customcssjs.modules.salesChannelsAll\') }}\n                        </span>\n                    </template>\n                </sw-entity-listing>\n                <div v-if="isLoading"\n                     class="sw-overlay">\n                    <sw-loader></sw-loader>\n                </div>\n            {% endblock %}\n        </template>\n    </sw-page>\n{% endblock %}\n'},jIcv:function(e,s,t){"use strict";t.r(s);var n=t("j7kl"),o=t.n(n);const{Component:i}=Shopware,{Criteria:a}=Shopware.Data;i.register("dne-module-list",{template:o.a,inject:["repositoryFactory","context","acl"],data:()=>({repository:null,modules:null,isLoading:!0}),metaInfo(){return{title:this.$createTitle()}},computed:{columns(){return[{property:"active",label:this.$t("dne-customcssjs.modules.activeLabel"),allowResize:!1,align:"center",width:"125px"},{property:"name",dataIndex:"name",label:this.$t("dne-customcssjs.modules.nameLabel"),routerLink:"dne.module.detail",allowResize:!0,primary:!0},{property:"salesChannels",dataIndex:"salesChannels",label:this.$t("dne-customcssjs.modules.salesChannelsLabel"),allowResize:!0,sortable:!1}]}},created(){this.repository=this.repositoryFactory.create("dne_custom_js_css");const e=Shopware.Service("syncService").httpClient,s={Authorization:`Bearer ${Shopware.Context.api.authToken.access}`,"Content-Type":"application/json"},t=new a;t.addAssociation("salesChannels"),t.addSorting(a.sort("name","ASC",!1)),this.repository.search(t,Shopware.Context.api).then((t=>{this.modules=t,this.isLoading=!1,this.$nextTick().then((()=>{this.$refs.listing.$on("delete-item-finish",(()=>{this.isLoading=!0,e.get("_action/dne-customcssjs/compile",{headers:s}).then((()=>{this.isLoading=!1})).catch((()=>{this.isLoading=!1}))}))}))}))}});t("J2v/"),t("mpHT");var l=t("380L"),c=t("/3Mh");const{Module:d}=Shopware;d.register("dne-module",{color:"#ff3d58",icon:"default-text-code",title:"dne-customcssjs.modules.title",description:"",snippets:{"de-DE":l,"en-GB":c},routes:{list:{component:"dne-module-list",path:"list",meta:{privilege:"dne_custom_js_css.viewer"}},detail:{component:"dne-module-detail",path:"detail/:id",meta:{parentPath:"dne.module.list",privilege:"dne_custom_js_css.viewer"},props:{default:e=>({moduleId:e.params.id})}},create:{component:"dne-module-detail",path:"create",meta:{parentPath:"dne.module.list",privilege:"dne_custom_js_css.creator"}}},navigation:[{label:"dne-customcssjs.modules.menu",path:"dne.module.list",parent:"sw-extension",position:100}]})},mpHT:function(e,s){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:null,key:"dne_custom_js_css",roles:{viewer:{privileges:["dne_custom_js_css:read"],dependencies:[]},editor:{privileges:["dne_custom_js_css:update","dne_custom_js_css_sales_channel:create","dne_custom_js_css_sales_channel:delete"],dependencies:[]},creator:{privileges:["dne_custom_js_css:create","dne_custom_js_css_sales_channel:create","dne_custom_js_css_sales_channel:delete"],dependencies:[]},deleter:{privileges:["dne_custom_js_css:delete"],dependencies:[]}}})},uO3B:function(e,s,t){}},[["jIcv","runtime","vendors-node"]]]);